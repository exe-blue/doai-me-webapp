# Job System Implementation Plan v1

## Overview

**ëª©í‘œ**: "URL ì…ë ¥ â†’ DB ì €ì¥ â†’ Workerì—ê²Œ ìë™ ì „ì†¡" íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
**ë²”ìœ„**: Backend API + Socket.io ì‹¤ì‹œê°„ ì „ì†¡ + ì‘ì—… ê´€ë¦¬ UI

---

## Requirements Summary

### í™•ì • ìš”êµ¬ì‚¬í•­
1. **ì‘ì—… í”Œë¡œìš°**: ì‘ì—… ë“±ë¡ â†’ DB ì €ì¥ â†’ Worker ìë™ ë¶„ë°° (Aë°©ì‹)
2. **ì‹¤ì‹œê°„ ê¸°ëŠ¥**: ì¼ì‹œì •ì§€/ì¬ê°œ, ì§„í–‰í˜„í™© ëª¨ë‹ˆí„°ë§
3. **ë¶„ë°° ë°©ì‹**: Socket.io ìš°ì„  + Polling í´ë°± (Cë°©ì‹)
4. **ëª©í‘œ ê´€ë¦¬**:
   - ì—°ê²°ëœ ì •ìƒ ìŠ¤ë§ˆíŠ¸í° 1ëŒ€ë‹¹ 1íšŒ ì‹¤í–‰
   - ë°±ë¶„ìœ¨(%) + ê¸°ê¸° ëŒ€ìˆ˜ 2ê°€ì§€ ëª©í‘œ íƒ€ì… ì§€ì›

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Dashboard UI                              â”‚
â”‚  [ì‘ì—… ìƒì„±] â†’ [ì‘ì—… ëª©ë¡] â†’ [ì§„í–‰ í˜„í™©] â†’ [ì¼ì‹œì •ì§€/ì¬ê°œ]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ REST API + Socket.io
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Backend (Next.js API)                       â”‚
â”‚  POST /api/jobs (ìƒì„±)                                           â”‚
â”‚  GET /api/jobs (ëª©ë¡)                                            â”‚
â”‚  PATCH /api/jobs/:id (ìˆ˜ì •/ì¼ì‹œì •ì§€)                              â”‚
â”‚  DELETE /api/jobs/:id (ì‚­ì œ)                                     â”‚
â”‚                                                                  â”‚
â”‚  JobDistributor: ìë™ ë¶„ë°° ë¡œì§                                   â”‚
â”‚  â””â”€ ì—°ê²°ëœ idle ê¸°ê¸° ì¡°íšŒ â†’ job_assignments ìƒì„± â†’ Socket ì „ì†¡    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Socket.io Server   â”‚          â”‚      Supabase       â”‚
â”‚   /worker namespace  â”‚          â”‚  jobs, assignments  â”‚
â”‚   job:assign event   â”‚          â”‚     (fallback)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                 â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       PC Worker (client-pc)                      â”‚
â”‚  1. Socket.io: job:assign ìˆ˜ì‹  â†’ ì¦‰ì‹œ ì‹¤í–‰                       â”‚
â”‚  2. Polling: 3ì´ˆë§ˆë‹¤ pending ì¡°íšŒ (í´ë°±)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Database Schema Changes

### jobs í…Œì´ë¸” í™•ì¥

```sql
-- ê¸°ì¡´ ì»¬ëŸ¼ ìœ ì§€ + ì¶”ê°€
ALTER TABLE jobs ADD COLUMN IF NOT EXISTS status VARCHAR(20) DEFAULT 'active'
  CHECK (status IN ('active', 'paused', 'completed', 'cancelled'));

ALTER TABLE jobs ADD COLUMN IF NOT EXISTS target_type VARCHAR(20) DEFAULT 'all_devices'
  CHECK (target_type IN ('all_devices', 'percentage', 'device_count'));

ALTER TABLE jobs ADD COLUMN IF NOT EXISTS target_value INTEGER DEFAULT 100;
-- target_type='all_devices': ëª¨ë“  ì—°ê²° ê¸°ê¸° (target_value ë¬´ì‹œ)
-- target_type='percentage': target_value% ê¸°ê¸°ì— í• ë‹¹
-- target_type='device_count': target_valueëŒ€ ê¸°ê¸°ì— í• ë‹¹

ALTER TABLE jobs ADD COLUMN IF NOT EXISTS assigned_count INTEGER DEFAULT 0;
ALTER TABLE jobs ADD COLUMN IF NOT EXISTS completed_count INTEGER DEFAULT 0;
ALTER TABLE jobs ADD COLUMN IF NOT EXISTS failed_count INTEGER DEFAULT 0;
```

---

## Implementation Steps

### Step 1: Backend API Routes

**íŒŒì¼**: `dashboard/src/app/api/jobs/route.ts`

```typescript
// GET /api/jobs - ì‘ì—… ëª©ë¡ ì¡°íšŒ
// POST /api/jobs - ì‘ì—… ìƒì„± + ìë™ ë¶„ë°°

interface CreateJobRequest {
  title: string;
  target_url: string;
  duration_sec: number;
  target_type: 'all_devices' | 'percentage' | 'device_count';
  target_value: number;
  prob_like: number;
  prob_comment: number;
}
```

**íŒŒì¼**: `dashboard/src/app/api/jobs/[id]/route.ts`

```typescript
// GET /api/jobs/:id - ë‹¨ì¼ ì‘ì—… ì¡°íšŒ
// PATCH /api/jobs/:id - ìˆ˜ì • (status: 'paused'/'active')
// DELETE /api/jobs/:id - ì‚­ì œ (pending assignmentsë„ í•¨ê»˜)
```

---

### Step 2: Job Distributor Service

**íŒŒì¼**: `dashboard/src/lib/job-distributor.ts`

```typescript
export async function distributeJob(jobId: string, jobConfig: JobConfig) {
  // 1. ì—°ê²°ëœ idle ê¸°ê¸° ì¡°íšŒ
  const idleDevices = await getIdleDevices();

  // 2. ëª©í‘œì— ë”°ë¼ í• ë‹¹ ëŒ€ìƒ ê²°ì •
  const targetDevices = selectTargetDevices(idleDevices, jobConfig.target_type, jobConfig.target_value);

  // 3. job_assignments ìƒì„± (bulk insert)
  const assignments = await createAssignments(jobId, targetDevices);

  // 4. Socket.ioë¡œ Workerì—ê²Œ ì¦‰ì‹œ ì „ì†¡
  await pushAssignmentsViaSocket(assignments);

  return { assigned: assignments.length };
}
```

---

### Step 3: Socket.io Server í™•ì¥

**íŒŒì¼**: `backend/socketio-server.js`

ì¶”ê°€ ì´ë²¤íŠ¸:
```javascript
// Server â†’ Worker: ìƒˆ ì‘ì—… í• ë‹¹
workerNs.emit('job:assign', {
  assignmentId: '...',
  deviceId: '...',
  job: { title, target_url, duration_sec, prob_like, ... }
});

// Server â†’ Dashboard: ì‘ì—… ìƒíƒœ ì—…ë°ì´íŠ¸
dashboardNs.emit('job:status:update', {
  jobId: '...',
  status: 'active' | 'paused' | 'completed',
  progress: { assigned, completed, failed }
});
```

---

### Step 4: Worker Socket í•¸ë“¤ëŸ¬ ì¶”ê°€

**íŒŒì¼**: `client-pc/worker.js`

```javascript
// ìƒˆ ì‘ì—… ì¦‰ì‹œ ìˆ˜ì‹  (Socket.io)
socket.on('job:assign', async (payload) => {
  const { assignmentId, deviceId, job } = payload;
  // ë¡œì»¬ íì— ì¶”ê°€ â†’ ì¦‰ì‹œ ì‹¤í–‰
  jobQueue.push({ id: assignmentId, device_id: deviceId, jobs: job, ... });
  processQueue();
});
```

---

### Step 5: ì‘ì—… ê´€ë¦¬ UI

**íŒŒì¼**: `dashboard/src/app/dashboard/jobs/page.tsx` (ë¦¬íŒ©í† ë§)

#### 5.1 ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¬ ì‘ì—… ê´€ë¦¬                                     [+ ìƒˆ ì‘ì—…]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ“Š ìš”ì•½                                                  â”‚    â”‚
â”‚  â”‚ ì´ ì‘ì—…: 12  |  ì§„í–‰ì¤‘: 3  |  ì¼ì‹œì •ì§€: 1  |  ì™„ë£Œ: 8    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ì‘ì—… ëª©ë¡                              [í•„í„°] [ê²€ìƒ‰]     â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ â–¶ï¸ ìœ íŠœë¸Œ ì˜ìƒ A      ì§„í–‰ì¤‘   15/20ëŒ€ (75%)   â¸ï¸ ğŸ—‘ï¸    â”‚    â”‚
â”‚  â”‚   â””â”€ ì™„ë£Œ: 12 | ì‹¤í–‰ì¤‘: 3 | ì‹¤íŒ¨: 0                      â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ â¸ï¸ ìœ íŠœë¸Œ ì˜ìƒ B      ì¼ì‹œì •ì§€  8/20ëŒ€ (40%)   â–¶ï¸ ğŸ—‘ï¸    â”‚    â”‚
â”‚  â”‚   â””â”€ ì™„ë£Œ: 8 | ì‹¤í–‰ì¤‘: 0 | ì‹¤íŒ¨: 0                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.2 ìƒˆ ì‘ì—… ìƒì„± ëª¨ë‹¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ìƒˆ ì‘ì—… ìƒì„±                        âœ•   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ YouTube URL *                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ https://youtu.be/...                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ ì‘ì—…ëª…                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ (ìë™: ì˜ìƒ ì œëª©)                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ ì‹œì²­ ì‹œê°„: [60]ì´ˆ                        â”‚
â”‚                                         â”‚
â”‚ ëª©í‘œ ì„¤ì •                                â”‚
â”‚ â—‹ ëª¨ë“  ê¸°ê¸° (í˜„ì¬ 20ëŒ€ ì—°ê²°ë¨)           â”‚
â”‚ â—‹ ë°±ë¶„ìœ¨: [___]%  â†’ ì˜ˆìƒ 15ëŒ€            â”‚
â”‚ â—‹ ê¸°ê¸° ìˆ˜: [___]ëŒ€                       â”‚
â”‚                                         â”‚
â”‚ í™•ë¥  ì„¤ì •                                â”‚
â”‚ ì¢‹ì•„ìš”:  [====____] 30%                  â”‚
â”‚ ëŒ“ê¸€:    [=_______] 5%                   â”‚
â”‚                                         â”‚
â”‚         [ì·¨ì†Œ]        [ì‘ì—… ìƒì„±]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.3 ì‹¤ì‹œê°„ ì§„í–‰ í˜„í™©

- Socket.ioë¡œ `job:progress` ì´ë²¤íŠ¸ ìˆ˜ì‹ 
- í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
- ê° ê¸°ê¸°ë³„ ìƒíƒœ í‘œì‹œ (í¼ì¹˜ê¸° ê°€ëŠ¥)

---

### Step 6: ì¼ì‹œì •ì§€/ì¬ê°œ ë¡œì§

**ì¼ì‹œì •ì§€ (Pause)**:
1. `jobs.status = 'paused'` ì—…ë°ì´íŠ¸
2. í•´ë‹¹ ì‘ì—…ì˜ `pending` assignmentsë¥¼ `paused` ìƒíƒœë¡œ ë³€ê²½
3. Socket.ioë¡œ `job:paused` ì´ë²¤íŠ¸ ë¸Œë¡œë“œìºìŠ¤íŠ¸
4. WorkerëŠ” í•´ë‹¹ ì‘ì—… ì‹¤í–‰ ì¤‘ì§€ (í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ê²ƒì€ ì™„ë£Œ)

**ì¬ê°œ (Resume)**:
1. `jobs.status = 'active'` ì—…ë°ì´íŠ¸
2. `paused` assignmentsë¥¼ `pending`ìœ¼ë¡œ ë³µêµ¬
3. Socket.ioë¡œ `job:resumed` + í• ë‹¹ ì •ë³´ ì „ì†¡
4. Workerê°€ ë‹¤ì‹œ ì‘ì—… ì‹œì‘

---

## Acceptance Criteria

### API
- [ ] `POST /api/jobs` í˜¸ì¶œ ì‹œ ì‘ì—… ìƒì„± + ìë™ ë¶„ë°°
- [ ] `PATCH /api/jobs/:id` í˜¸ì¶œ ì‹œ ì¼ì‹œì •ì§€/ì¬ê°œ ë™ì‘
- [ ] `DELETE /api/jobs/:id` í˜¸ì¶œ ì‹œ ì‘ì—… + pending assignments ì‚­ì œ

### Socket.io
- [ ] ì‘ì—… ìƒì„± ì‹œ ì—°ê²°ëœ Workerì—ê²Œ ì¦‰ì‹œ `job:assign` ì „ì†¡
- [ ] Worker ì—°ê²° ì‹œ pending assignments ìë™ ì „ì†¡
- [ ] ì¼ì‹œì •ì§€/ì¬ê°œ ì‹œ ê´€ë ¨ ì´ë²¤íŠ¸ ì „ì†¡

### UI
- [ ] ì‘ì—… ëª©ë¡ì—ì„œ ì‹¤ì‹œê°„ ì§„í–‰ë¥  í™•ì¸ ê°€ëŠ¥
- [ ] ì¼ì‹œì •ì§€/ì¬ê°œ ë²„íŠ¼ ë™ì‘
- [ ] ìƒˆ ì‘ì—… ìƒì„± ëª¨ë‹¬ì—ì„œ ëª©í‘œ íƒ€ì… (ì „ì²´/ë°±ë¶„ìœ¨/ê¸°ê¸°ìˆ˜) ì„ íƒ ê°€ëŠ¥
- [ ] ì—°ê²°ëœ ê¸°ê¸° ìˆ˜ ì‹¤ì‹œê°„ í‘œì‹œ

### Worker
- [ ] Socket.io `job:assign` ìˆ˜ì‹  ì‹œ ì¦‰ì‹œ íì— ì¶”ê°€
- [ ] Polling í´ë°± ì •ìƒ ë™ì‘ (Socket ëŠì–´ì ¸ë„ ì‘ì—… ìˆ˜í–‰)

---

## File Changes Summary

| íŒŒì¼ | ì‘ì—… |
|------|------|
| `dashboard/src/app/api/jobs/route.ts` | ì‹ ê·œ (GET/POST) |
| `dashboard/src/app/api/jobs/[id]/route.ts` | ì‹ ê·œ (GET/PATCH/DELETE) |
| `dashboard/src/lib/job-distributor.ts` | ì‹ ê·œ (ë¶„ë°° ë¡œì§) |
| `dashboard/src/app/dashboard/jobs/page.tsx` | ë¦¬íŒ©í† ë§ (ìƒˆ UI) |
| `dashboard/src/components/jobs/job-list.tsx` | ì‹ ê·œ (ì‘ì—… ëª©ë¡) |
| `dashboard/src/components/jobs/job-create-modal.tsx` | ì‹ ê·œ (ìƒì„± ëª¨ë‹¬) |
| `dashboard/src/components/jobs/job-progress.tsx` | ì‹ ê·œ (ì§„í–‰ í˜„í™©) |
| `backend/socketio-server.js` | ìˆ˜ì • (job:assign ì´ë²¤íŠ¸) |
| `client-pc/worker.js` | ìˆ˜ì • (job:assign í•¸ë“¤ëŸ¬) |
| `migrations/002_job_system.sql` | ì‹ ê·œ (ìŠ¤í‚¤ë§ˆ ë³€ê²½) |

---

## Risk & Mitigations

| ë¦¬ìŠ¤í¬ | ëŒ€ì‘ |
|--------|------|
| Socket.io ì—°ê²° ë¶ˆì•ˆì • | Polling í´ë°± ìœ ì§€, ì¬ì—°ê²° ë¡œì§ |
| ëŒ€ëŸ‰ ì‘ì—… ìƒì„± ì‹œ ë¶€í•˜ | Bulk insert + ë°°ì¹˜ Socket ì „ì†¡ |
| ë™ì‹œ ì‘ì—… ì¶©ëŒ | DB íŠ¸ëœì­ì…˜ + ë‚™ê´€ì  ë½ |
| Worker ì¬ì‹œì‘ ì‹œ ì‘ì—… ìœ ì‹¤ | pending ìƒíƒœ ìœ ì§€, ì¬ì—°ê²° ì‹œ ì¬í• ë‹¹ |

---

## Execution Order

1. **DB ë§ˆì´ê·¸ë ˆì´ì…˜** - jobs í…Œì´ë¸” í™•ì¥
2. **Backend API** - CRUD ì—”ë“œí¬ì¸íŠ¸
3. **Job Distributor** - ìë™ ë¶„ë°° ë¡œì§
4. **Socket.io í™•ì¥** - job:assign ì´ë²¤íŠ¸
5. **Worker í•¸ë“¤ëŸ¬** - job:assign ìˆ˜ì‹ 
6. **UI ì»´í¬ë„ŒíŠ¸** - ì‘ì—… ëª©ë¡, ìƒì„± ëª¨ë‹¬
7. **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§** - ì§„í–‰ í˜„í™© ì—°ë™
8. **ì¼ì‹œì •ì§€/ì¬ê°œ** - ìƒíƒœ ê´€ë¦¬ ì™„ì„±
9. **í…ŒìŠ¤íŠ¸** - E2E ê²€ì¦

---

## Estimated Implementation

- DB + API: 1 step
- Socket.io + Worker: 1 step
- UI Components: 2 steps
- Integration & Testing: 1 step

Total: 5 major steps
